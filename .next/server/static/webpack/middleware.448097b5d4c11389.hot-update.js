"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./lib/supabase/middleware.ts":
/*!************************************!*\
  !*** ./lib/supabase/middleware.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateSession: () => (/* binding */ updateSession)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nasync function updateSession(request) {\n    let supabaseResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n        request\n    });\n    // In Edge Runtime, we need to access env vars at runtime\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n    const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n    if (!supabaseUrl || !supabaseAnonKey) {\n        console.error(\"Missing Supabase environment variables in middleware\");\n        return supabaseResponse;\n    }\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl, supabaseAnonKey, {\n        cookies: {\n            getAll () {\n                return request.cookies.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value })=>request.cookies.set(name, value));\n                supabaseResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n                    request\n                });\n                cookiesToSet.forEach(({ name, value, options })=>supabaseResponse.cookies.set(name, value, options));\n            }\n        }\n    });\n    let user = null;\n    try {\n        const { data } = await supabase.auth.getUser();\n        user = data.user;\n    } catch (error) {\n        // Silently handle auth errors for public routes\n        // Only log if it's an admin route\n        if (request.nextUrl.pathname.startsWith(\"/admin\")) {\n            console.error(\"Auth error in middleware:\", error);\n        }\n    }\n    // Protect admin routes - redirect to login if not authenticated\n    if (request.nextUrl.pathname.startsWith(\"/admin\") && !request.nextUrl.pathname.startsWith(\"/admin/login\") && !user) {\n        const url = request.nextUrl.clone();\n        url.pathname = \"/admin/login\";\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(url);\n    }\n    return supabaseResponse;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbGliL3N1cGFiYXNlL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWtEO0FBQ1U7QUFFckQsZUFBZUUsY0FBY0MsT0FBb0I7SUFDdEQsSUFBSUMsbUJBQW1CSCxxREFBWUEsQ0FBQ0ksSUFBSSxDQUFDO1FBQ3ZDRjtJQUNGO0lBRUEseURBQXlEO0lBQ3pELE1BQU1HLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0Msd0JBQXdCO0lBQ3hELE1BQU1DLGtCQUFrQkgsUUFBUUMsR0FBRyxDQUFDRyw2QkFBNkI7SUFFakUsSUFBSSxDQUFDTCxlQUFlLENBQUNJLGlCQUFpQjtRQUNwQ0UsUUFBUUMsS0FBSyxDQUFDO1FBQ2QsT0FBT1Q7SUFDVDtJQUVBLE1BQU1VLFdBQVdkLGlFQUFrQkEsQ0FDakNNLGFBQ0FJLGlCQUNBO1FBQ0VLLFNBQVM7WUFDUEM7Z0JBQ0UsT0FBT2IsUUFBUVksT0FBTyxDQUFDQyxNQUFNO1lBQy9CO1lBQ0FDLFFBQU9DLFlBQVk7Z0JBQ2pCQSxhQUFhQyxPQUFPLENBQUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFLbEIsUUFBUVksT0FBTyxDQUFDTyxHQUFHLENBQUNGLE1BQU1DO2dCQUNwRWpCLG1CQUFtQkgscURBQVlBLENBQUNJLElBQUksQ0FBQztvQkFDbkNGO2dCQUNGO2dCQUNBZSxhQUFhQyxPQUFPLENBQUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRUUsT0FBTyxFQUFFLEdBQUtuQixpQkFBaUJXLE9BQU8sQ0FBQ08sR0FBRyxDQUFDRixNQUFNQyxPQUFPRTtZQUMvRjtRQUNGO0lBQ0Y7SUFHRixJQUFJQyxPQUFPO0lBQ1gsSUFBSTtRQUNGLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUcsTUFBTVgsU0FBU1ksSUFBSSxDQUFDQyxPQUFPO1FBQzVDSCxPQUFPQyxLQUFLRCxJQUFJO0lBQ2xCLEVBQUUsT0FBT1gsT0FBTztRQUNkLGdEQUFnRDtRQUNoRCxrQ0FBa0M7UUFDbEMsSUFBSVYsUUFBUXlCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsV0FBVztZQUNqRGxCLFFBQVFDLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzdDO0lBQ0Y7SUFFQSxnRUFBZ0U7SUFDaEUsSUFBSVYsUUFBUXlCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsYUFBYSxDQUFDM0IsUUFBUXlCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsbUJBQW1CLENBQUNOLE1BQU07UUFDbEgsTUFBTU8sTUFBTTVCLFFBQVF5QixPQUFPLENBQUNJLEtBQUs7UUFDakNELElBQUlGLFFBQVEsR0FBRztRQUNmLE9BQU81QixxREFBWUEsQ0FBQ2dDLFFBQVEsQ0FBQ0Y7SUFDL0I7SUFFQSxPQUFPM0I7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9saWIvc3VwYWJhc2UvbWlkZGxld2FyZS50cz9kOTBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3NyXCJcbmltcG9ydCB7IE5leHRSZXNwb25zZSwgdHlwZSBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVTZXNzaW9uKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGxldCBzdXBhYmFzZVJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xuICAgIHJlcXVlc3QsXG4gIH0pXG5cbiAgLy8gSW4gRWRnZSBSdW50aW1lLCB3ZSBuZWVkIHRvIGFjY2VzcyBlbnYgdmFycyBhdCBydW50aW1lXG4gIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXG4gIGNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZXG5cbiAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gICAgY29uc29sZS5lcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgaW4gbWlkZGxld2FyZScpXG4gICAgcmV0dXJuIHN1cGFiYXNlUmVzcG9uc2VcbiAgfVxuXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgIHN1cGFiYXNlVXJsLFxuICAgIHN1cGFiYXNlQW5vbktleSxcbiAgICB7XG4gICAgICBjb29raWVzOiB7XG4gICAgICAgIGdldEFsbCgpIHtcbiAgICAgICAgICByZXR1cm4gcmVxdWVzdC5jb29raWVzLmdldEFsbCgpXG4gICAgICAgIH0sXG4gICAgICAgIHNldEFsbChjb29raWVzVG9TZXQpIHtcbiAgICAgICAgICBjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSB9KSA9PiByZXF1ZXN0LmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlKSlcbiAgICAgICAgICBzdXBhYmFzZVJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+IHN1cGFiYXNlUmVzcG9uc2UuY29va2llcy5zZXQobmFtZSwgdmFsdWUsIG9wdGlvbnMpKVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICApXG5cbiAgbGV0IHVzZXIgPSBudWxsXG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxuICAgIHVzZXIgPSBkYXRhLnVzZXJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBTaWxlbnRseSBoYW5kbGUgYXV0aCBlcnJvcnMgZm9yIHB1YmxpYyByb3V0ZXNcbiAgICAvLyBPbmx5IGxvZyBpZiBpdCdzIGFuIGFkbWluIHJvdXRlXG4gICAgaWYgKHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKFwiL2FkbWluXCIpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBlcnJvciBpbiBtaWRkbGV3YXJlOlwiLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvLyBQcm90ZWN0IGFkbWluIHJvdXRlcyAtIHJlZGlyZWN0IHRvIGxvZ2luIGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gIGlmIChyZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi9hZG1pblwiKSAmJiAhcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvYWRtaW4vbG9naW5cIikgJiYgIXVzZXIpIHtcbiAgICBjb25zdCB1cmwgPSByZXF1ZXN0Lm5leHRVcmwuY2xvbmUoKVxuICAgIHVybC5wYXRobmFtZSA9IFwiL2FkbWluL2xvZ2luXCJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVybClcbiAgfVxuXG4gIHJldHVybiBzdXBhYmFzZVJlc3BvbnNlXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyQ2xpZW50IiwiTmV4dFJlc3BvbnNlIiwidXBkYXRlU2Vzc2lvbiIsInJlcXVlc3QiLCJzdXBhYmFzZVJlc3BvbnNlIiwibmV4dCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImVycm9yIiwic3VwYWJhc2UiLCJjb29raWVzIiwiZ2V0QWxsIiwic2V0QWxsIiwiY29va2llc1RvU2V0IiwiZm9yRWFjaCIsIm5hbWUiLCJ2YWx1ZSIsInNldCIsIm9wdGlvbnMiLCJ1c2VyIiwiZGF0YSIsImF1dGgiLCJnZXRVc2VyIiwibmV4dFVybCIsInBhdGhuYW1lIiwic3RhcnRzV2l0aCIsInVybCIsImNsb25lIiwicmVkaXJlY3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./lib/supabase/middleware.ts\n");

/***/ })

});